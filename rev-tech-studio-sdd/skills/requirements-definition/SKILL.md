---
name: requirements-definition
description: brainstormingで明確化したプロジェクトのアイディアを、実装可能な要件定義書に落とし込むスキル。機能要件と非機能要件を明確にし、開発の指針を提供する。要件定義、要求仕様、機能要件、非機能要件について言及している場合に使用してください。
---

# Requirements Definition

## 目的

brainstormingで明確化したプロジェクトのアイディアを、実装可能な要件定義書に落とし込む。

## 責任範囲

- brainstormingドキュメントから機能要件を抽出する
  - プロジェクトの目的を具体的な機能として定義し、実装の方向性を明確にする
- 非機能要件を定義する
  - パフォーマンス、セキュリティ、保守性などの品質特性を明確にする
- ユーザーストーリーを作成する
  - ユーザー視点で機能を記述し、価値を明確にする
- 要件の優先順位を明確にする
  - 開発順序を決定し、リソースを効率的に配分する
- 要件定義書をドキュメント化する
  - 後工程で参照できる形で要件を記録する

**責任範囲外:**

- 技術スタック・フレームワークの選定
  - 実装フェーズで技術的制約や要件を考慮して決定する
- データベース設計（テーブル設計、ER図など）
  - 詳細設計フェーズで要件に基づいて設計する
- アーキテクチャ設計（システム構成、デザインパターンなど）
  - 詳細設計フェーズで非機能要件に基づいて設計する
- コードや疑似コードの記述
  - 要件定義は「何を作るか」に集中し、「どう作るか」は含まない
- UIデザインの具体的な作成（ワイヤーフレーム、モックアップなど）
  - 要件レベルでの画面仕様に留め、詳細なデザインは別フェーズで行う
- 実装の詳細や具体的な処理フロー
  - 要件として必要な振る舞いを定義し、実装方法は開発者に委ねる

## ワークフロー

### 1. brainstormingドキュメントの確認

ユーザーにbrainstormingドキュメントの場所を確認し、内容を読み込む。
- プロジェクトの全体像を把握し、要件定義の基盤とする

**確認する項目:**

- プロジェクト概要
- ターゲットユーザー
- 解決する課題
- 差別化ポイント

**質問例:**

```text
brainstormingドキュメントの場所を教えてください。
（例：docs/brainstorming_results.md）

もしくは、brainstormingを実施していない場合は、以下の情報を簡潔に教えてください：
- プロジェクトの概要
- ターゲットユーザー
- 解決したい課題
```

**注意:** brainstormingドキュメントが存在しない場合は、ユーザーに最低限の情報を確認してから進める。

### 2. 機能要件の洗い出し

プロジェクトに必要な機能を具体的にリストアップする。
- 漏れなく機能を特定し、実装の範囲を明確にする

**洗い出しの原則:**

- **ユーザー視点で考える**
  - ユーザーが何をしたいか、何を達成したいかを基準にする
- **具体的に記述する**
  - 曖昧な表現を避け、明確な機能として定義する
- **実装の詳細は含めない**
  - 「何を」に集中し、「どのように」は含めない
- **コードや疑似コードは書かない**
  - 要件定義は実装方法ではなく、必要な機能を定義する

**洗い出し方法:**

1. brainstormingドキュメントから機能を抽出する
2. ユーザーとの対話で不足している機能を補完する

**対話の例:**

```text
brainstormingドキュメントから以下の機能が必要と判断しました：

- ユーザー登録・ログイン
- 読書記録の作成・編集・削除
- 本の検索
- 読書メモの作成
- 読んだ本の統計表示
- 友人との読書記録共有

他に必要な機能はありますか？
```

**注意:** ユーザーの回答を待ってから次のステップへ進む。

### 3. 非機能要件の定義

システムの品質特性を定義する。
- 開発・運用の方針を明確にし、後工程での手戻りを防ぐ

**定義する項目:**

#### パフォーマンス要件

- レスポンス時間の目標
- 同時接続数の想定
- データ量の見込み

**注意:** 具体的な数値目標を設定するが、技術的な実装方法（キャッシュ戦略、インデックス設計など）は範囲外

#### セキュリティ要件

- 認証・認可の必要性
- データの保護レベル
- プライバシー保護の方針

**注意:** 要件レベルでの方針を定義し、具体的な実装技術（JWT、OAuth2など）の選定は範囲外

#### 可用性要件

- サービスの稼働時間目標
- ダウンタイムの許容範囲
- バックアップの必要性

#### 保守性要件

- コードの可読性・保守性の方針
- ドキュメント化の要求
- テストの方針

**注意:** 方針レベルの定義に留め、具体的なテスト戦略やCI/CDの設計は範囲外

#### 互換性要件

- 対応ブラウザ・デバイス
- 既存システムとの連携要件
- データ移行の必要性

**対話の例:**

```text
非機能要件について確認させてください。

【パフォーマンス】
想定ユーザー数はどのくらいですか？
A. 100人未満（個人・小規模）
B. 100〜1000人（中規模）
C. 1000人以上（大規模）

【推奨：B】中規模を想定すると、拡張性を考慮した設計ができます
```

**注意:** 一問一答形式を厳守する。ユーザーの回答を待ってから次の質問へ進む。

### 4. ユーザーストーリーの作成

機能要件をユーザーストーリー形式で記述する。
- ユーザー視点で価値を明確にし、開発の目的を共有する

**ユーザーストーリーの形式:**

```text
【ユーザーストーリー形式】
〈誰が〉として、〈何を〉したい。なぜなら〈価値・理由〉だから。

【受け入れ基準】
- 〈条件1〉
- 〈条件2〉
```

**作成の原則:**

- **ユーザー視点で記述する**
  - システムの都合ではなく、ユーザーの目的を中心にする
- **価値を明確にする**
  - なぜその機能が必要かを説明する
- **受け入れ基準を具体的にする**
  - 機能が完成したと判断できる基準を明確にする
- **実装の詳細は含めない**
  - 「何ができるか」に集中し、「どう実装するか」は含めない

**ユーザーストーリーの例:**

```text
【ユーザーストーリー: 読書記録の作成】
読書好きの大学生として、読んだ本の記録を残したい。なぜなら、後から読書履歴を振り返りたいから。

【受け入れ基準】
- 本のタイトル、著者、読了日を入力できる
- 読書メモ（感想、引用など）を自由に記述できる
- 記録した内容を後から閲覧できる
- 記録した内容を編集・削除できる
```

**注意:** 技術的な実装（データベース設計、API設計など）は記述しない。

### 5. 要件の優先順位付け

要件の優先順位を明確にする。
- 開発の順序を決定し、効率的に価値を提供する

**優先順位の基準:**

- **P1（最優先）** - プロジェクトの核となる機能。これがないとサービスが成立しない
- **P2（高優先）** - 重要な機能。初期リリースに含めるべき
- **P3（中優先）** - あると良い機能。リリース後の追加も可能
- **P4（低優先）** - 将来的に検討する機能。現時点では優先度が低い

**優先順位付けの方法:**

1. 各機能要件にP1〜P4のラベルを付ける
2. ユーザーに優先順位を確認する
3. 必要に応じて調整する

**対話の例:**

```text
以下の優先順位で進めてよろしいでしょうか？

【P1: 最優先】
- ユーザー登録・ログイン
- 読書記録の作成・編集・削除

【P2: 高優先】
- 本の検索
- 読書メモの作成

【P3: 中優先】
- 読書統計の表示
- 友人との記録共有

調整が必要な項目があれば教えてください。
```

**ユーザーの承認を待つ:** Yesの場合は次のステップへ、調整が必要な場合は優先順位を見直す。

### 6. 要件定義書の作成

収集した情報を要件定義書としてドキュメント化する。
- 実装フェーズで参照できる形で要件を記録する

**ドキュメント構成:**

1. **プロジェクト概要** - プロジェクトの目的とターゲットユーザー
2. **機能要件** - 必要な機能のリスト（優先順位付き）
3. **非機能要件** - パフォーマンス、セキュリティ、可用性などの要件
4. **ユーザーストーリー** - ユーザー視点での機能の説明と受け入れ基準
5. **要件の優先順位** - 開発の順序と理由
6. **制約事項** - 技術的・ビジネス的な制約
7. **想定されるリスク** - プロジェクト推進上のリスクと対策

**ドキュメント形式:**

- Markdown形式で作成する
- 保存先はユーザーに確認する
- ファイル名: `{プロジェクト名}_requirements.md`

**重要な禁止事項:**

- **コードや疑似コードは一切含めない**
  - 要件定義は実装の詳細を含まず、「何を作るか」に集中する
- **技術スタックやアーキテクチャの選定は含めない**
  - 詳細設計フェーズで扱う内容である
- **データベース設計（テーブル定義、ER図など）は含めない**
  - 詳細設計フェーズで扱う内容である

**ドキュメント例:**

```markdown
# 読書記録アプリ - 要件定義書

## プロジェクト概要

### 目的

読書好きの学生向けに、読書記録と学習管理を統合したアプリを提供する。読んだ本から得た知識を体系的に整理し、試験勉強や課題に活用できるようにする。

### ターゲットユーザー

- 大学生、高校生
- 読書好きで、年間20冊以上読む
- 読書から得た知識を実践的に活用したい

### 解決する課題

既存の読書記録アプリは「読んだ」という記録に留まり、読書から得た知識を学習に活かす仕組みがない。学生は読書と勉強を別々に管理しており、知識が分断されている。

## 機能要件

### P1: 最優先機能

#### ユーザー管理
- ユーザー登録：メールアドレスとパスワードで登録できる
- ログイン：登録したアカウントでログインできる
- プロフィール管理：ユーザー名、アイコンを設定できる

#### 読書記録管理
- 読書記録の作成：本のタイトル、著者、読了日、メモを記録できる
- 読書記録の編集：記録した内容を後から編集できる
- 読書記録の削除：不要な記録を削除できる
- 読書記録の一覧表示：自分の読書記録を一覧で見られる

### P2: 高優先機能

#### 本の検索
- 本の検索：タイトルや著者で本を検索できる
- 書籍情報の取得：検索結果から書籍情報を自動で取得できる

#### 読書メモ機能
- メモの作成：読書中の気づきや引用を記録できる
- メモの編集・削除：メモを後から編集・削除できる
- メモの分類：メモをカテゴリやタグで分類できる

### P3: 中優先機能

#### 読書統計
- 読書冊数の表示：月別・年別の読書冊数を表示できる
- ジャンル別統計：読んだ本のジャンル別統計を見られる

#### 共有機能
- 友人との記録共有：読書記録を友人と共有できる
- コメント機能：友人の読書記録にコメントできる

## 非機能要件

### パフォーマンス要件
- レスポンス時間：通常の操作は2秒以内に完了する
- 同時接続数：100〜1000人の同時利用を想定
- データ量：1ユーザーあたり年間100冊程度の記録を想定

### セキュリティ要件
- 認証：ユーザー認証機能を実装し、不正アクセスを防ぐ
- データ保護：ユーザーの個人情報と読書記録を適切に保護する
- プライバシー：ユーザーが共有設定を制御できるようにする

### 可用性要件
- 稼働時間：99%以上の稼働率を目標とする
- ダウンタイム：計画的なメンテナンスは事前通知する
- バックアップ：データは定期的にバックアップする

### 保守性要件
- コードの可読性：保守しやすいコード構造を維持する
- ドキュメント化：主要な機能と設計をドキュメント化する
- テスト：主要機能にはテストを用意する

### 互換性要件
- 対応ブラウザ：最新のChrome、Firefox、Safari、Edgeに対応
- 対応デバイス：PC、タブレット、スマートフォンに対応
- レスポンシブデザイン：画面サイズに応じて最適な表示を行う

## ユーザーストーリー

### ユーザー登録とログイン

**ユーザーストーリー:**
読書好きの大学生として、アカウントを作成したい。なぜなら、自分専用の読書記録を管理したいから。

**受け入れ基準:**
- メールアドレスとパスワードで新規登録できる
- 登録したアカウントでログインできる
- ログイン状態が維持される

### 読書記録の作成

**ユーザーストーリー:**
読書好きの大学生として、読んだ本の記録を残したい。なぜなら、後から読書履歴を振り返りたいから。

**受け入れ基準:**
- 本のタイトル、著者、読了日を入力できる
- 読書メモ（感想、引用など）を自由に記述できる
- 記録した内容を後から閲覧できる
- 記録した内容を編集・削除できる

### 本の検索

**ユーザーストーリー:**
読書好きの大学生として、読みたい本を検索したい。なぜなら、書籍情報を手動で入力する手間を省きたいから。

**受け入れ基準:**
- タイトルや著者で本を検索できる
- 検索結果から書籍情報を自動で取得できる
- 取得した情報を読書記録に追加できる

### 読書メモの作成

**ユーザーストーリー:**
読書好きの大学生として、読書中の気づきをメモしたい。なぜなら、学習に活かせる知識を記録したいから。

**受け入れ基準:**
- 読書記録に紐づくメモを作成できる
- メモをカテゴリやタグで分類できる
- メモを後から検索・閲覧できる

### 読書統計の表示

**ユーザーストーリー:**
読書好きの大学生として、自分の読書量を可視化したい。なぜなら、読書習慣を振り返りモチベーションを高めたいから。

**受け入れ基準:**
- 月別・年別の読書冊数を表示できる
- ジャンル別の統計を見られる
- グラフなどで視覚的に表示される

## 要件の優先順位

### 開発の順序

1. **フェーズ1（P1: 最優先）** - 基本機能の実装
   - ユーザー管理と読書記録管理を実装
   - これがないとサービスとして成立しない

2. **フェーズ2（P2: 高優先）** - 利便性の向上
   - 本の検索と読書メモ機能を実装
   - ユーザー体験を大幅に向上させる

3. **フェーズ3（P3: 中優先）** - 付加価値の提供
   - 読書統計と共有機能を実装
   - サービスの差別化を強化する

## 制約事項

### ビジネス的制約
- 初期リリースは3ヶ月以内を目標とする
- 開発リソースは限られているため、優先順位に従って段階的に実装する

### 技術的制約
- ユーザーデータは適切に保護する必要がある
- スケーラビリティを考慮した設計が必要

### スコープ外の項目
- 電子書籍リーダー機能
- 書籍の販売機能
- AI による書籍推薦機能（将来的に検討）

## 想定されるリスク

### 技術的リスク
- **リスク:** 書籍検索APIの利用制限
  - **対策:** 複数のAPIを検討し、代替手段を用意する

- **リスク:** データ量の増加によるパフォーマンス低下
  - **対策:** 初期段階から適切なデータ管理を行う

### ビジネス的リスク
- **リスク:** 類似サービスとの差別化が不十分
  - **対策:** 学習管理との統合という独自価値を明確にする

- **リスク:** ユーザー数が想定を下回る
  - **対策:** ターゲットユーザーへのヒアリングを継続する
```

## 出力

実装フェーズで参照できる要件定義書。以下の7項目を含む：

1. プロジェクト概要（目的、ターゲットユーザー、解決する課題）
2. 機能要件（優先順位付き）
3. 非機能要件（パフォーマンス、セキュリティ、可用性、保守性、互換性）
4. ユーザーストーリー（各機能のユーザー視点での説明と受け入れ基準）
5. 要件の優先順位（開発の順序と理由）
6. 制約事項（ビジネス的・技術的制約、スコープ外の項目）
7. 想定されるリスク（技術的・ビジネス的リスクと対策）

**重要:** 要件定義書には以下を含めないこと：
- コードや疑似コード
- 技術スタックやフレームワークの選定
- データベース設計（テーブル定義、ER図など）
- アーキテクチャ設計（システム構成、デザインパターンなど）
- 具体的な実装方法や処理フロー
