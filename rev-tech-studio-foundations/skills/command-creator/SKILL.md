---
name: command-creator
description: コマンドを作成・検証・改善する。新規コマンドの作成時には要件をヒアリングしてガイドライン準拠のコマンドファイルを生成し、既存コマンドの検証時には品質をチェックして改善提案を提供する。コマンドの作成、コマンドの品質チェック、コマンドの改善が必要なときに使用する。
---

# Command Creator

コマンドを作成・検証・改善し、高品質なコマンド開発を支援する。

## 目的

ガイドラインとベストプラクティスに準拠した高品質なコマンドを効率的に作成・維持するため、コマンドの設計から検証までを一貫してサポートする。

## 参照ドキュメント

このスキルは[コマンド品質チェックリスト](./command-checklist.md)をガイドラインとして使用する。

**チェックリストの役割:**
- 検証すべき項目の網羅的リスト
- 各項目の具体的な基準値と判断基準
- ベストプラクティスと具体例
- スコア算出方法の詳細

**Command Creatorの役割:**
- コマンド作成・検証の実行ワークフロー
- ユーザーとの対話プロセス
- 検証結果の評価方法（OK/WARNING/ERROR）
- 改善提案の生成プロセス

## 責任範囲

- 新規コマンドの要件をヒアリングし、設計を支援する
  - 曖昧な要件を明確化し、コマンドの目的と使用場面を定義する
- ガイドライン準拠のコマンドファイルを生成する
  - 手作業によるミスを防ぎ、品質を標準化する
- 既存コマンドの品質を検証する
  - ガイドライン違反を早期に発見し、品質を維持する
- 検証結果に基づく改善提案を提供する
  - 具体的な修正案を提示し、改善作業を効率化する

**責任範囲外:**
- コマンドの最終的な内容判断
  - プロジェクト固有の設定やビジネスロジックはユーザーが提供する
- コマンドから呼び出されるスキルの実装
  - スキルの作成は別のスキル（skill-creator）で行う
- コマンドのインストールや配布
  - コマンドの登録や配布は別のプロセスで行う

## ワークフロー

### 新規コマンド作成

このチェックリストをコピーして進捗を追跡します：

```
新規コマンド作成進捗：
- [ ] ステップ1：要件をヒアリングする
- [ ] ステップ2：コマンド設計を行う
- [ ] ステップ3：コマンドファイルを生成する
- [ ] ステップ4：最終検証を実施する
```

**ステップ1：要件をヒアリングする**

以下の質問でコマンドの要件を明確にする：
- このコマンドの目的は何か？
- 具体的に何をするコマンドか？
- どのスキルを使用するか？（スキルを使用しない場合は具体的なタスクは何か）
- どこに成果物を保存するか？（ファイルパス）
- 引数は必要か？必要な場合、どのような引数か？
- 複数のスキルを連携させるか？
- 類似の既存コマンドはあるか？

不明点がある場合は、実装前にユーザーに質問する。

**ステップ2：コマンド設計を行う**

ヒアリング結果を基に以下を設計する：

1. **コマンド名を決定する**
   - 基準の詳細は[コマンド品質チェックリスト](./command-checklist.md)を参照する
   - ケバブケースで動詞から始まる名前

2. **descriptionを作成する**
   - 基準の詳細は[コマンド品質チェックリスト](./command-checklist.md)を参照する
   - コマンドが何をするかを簡潔に説明

3. **使用するスキルを特定する**
   - スキル名を明確にリストアップ
   - 複数のスキルを使用する場合、実行順序を決定

4. **ファイルパスを定義する**
   - 成果物の保存先を具体的に指定
   - プロジェクト構造に適したパスを選択

5. **フロントマターを設計する**
   - description: 必須
   - argument-hint: 引数が必要な場合
   - allowed-tools: bashコマンドやファイル参照が必要な場合

設計概要をユーザーに提示し、承認を得てから次のステップに進む。

**ステップ3：コマンドファイルを生成する**

設計に基づきコマンドファイルを以下の構造で生成する：

[コマンドテンプレート](./templates/command-template.md)

コマンドテンプレート使用ガイド:
- [ ]で囲まれた部分は具体的な内容に置き換える
- 不要なセクションは削除可能
- 必要に応じてセクションを追加可能

生成後、[コマンド品質チェックリスト](./command-checklist.md)で確認

**ステップ4：最終検証を実施する**

生成したコマンドに対して「既存コマンド検証」ワークフローを実行し、品質を確認する。

問題が発見された場合は修正し、再検証する。

### 既存コマンド検証・改善

このチェックリストをコピーして進捗を追跡します：

```
コマンド検証進捗：
- [ ] ステップ1：コマンドを読み込む
- [ ] ステップ2：検証を実行する
- [ ] ステップ3：問題点を特定する
- [ ] ステップ4：改善提案を生成する
- [ ] ステップ5：改善版を生成する（ユーザー承認後）
```

**ステップ1：コマンドを読み込む**

検証対象のコマンドファイルパスを確認し、ファイルを読み込む。

ファイル名と配置場所も確認する。

**ステップ2：検証を実行する**

[コマンド品質チェックリスト](./command-checklist.md)に基づき検証を実施する。

**検証結果の評価方法:**

各検証項目を以下の3段階で評価する：

- **OK**: 問題なし、基準を満たしている
- **WARNING**: 改善推奨（必須ではないがベストプラクティスに準拠していない）
- **ERROR**: 修正必須（ガイドラインの必須要件に違反している）

**評価基準:**
- ガイドラインの必須要件に違反している → ERROR
  - 例：ファイル名規則違反、description欠落、スキル呼び出し不明確
- 推奨要件やベストプラクティスに違反している → WARNING
  - 例：冗長な記述、曖昧な表現
- 基準を満たしている → OK

**ステップ3：問題点を特定する**

検証結果から問題点をリストアップし、優先度を付ける：

- **高優先度**: ERROR項目、ガイドラインの必須要件違反
- **中優先度**: WARNING項目、ベストプラクティス違反
- **低優先度**: 改善推奨、品質向上のための提案

問題点ごとに以下を記録する：
- 問題の内容
- 該当箇所
- 影響度
- 推奨される修正方法

**ステップ4：改善提案を生成する**

特定された問題点に対して、具体的な改善提案を生成する：

提案形式：
```markdown
## 改善提案

### 高優先度（ERROR項目）

1. [問題内容]
   - **現状**: [現在の記述]
   - **問題点**: [何が問題か（チェックリスト参照）]
   - **推奨修正**: [具体的な修正案]
   - **理由**: [なぜ修正すべきか]

### 中優先度（WARNING項目）
...

### 低優先度（改善推奨）
...
```

改善提案をユーザーに提示し、修正を実施するか確認する。

**ステップ5：改善版を生成する（ユーザー承認後）**

ユーザーが承認した改善提案に基づき、修正版のコマンドファイルを生成する。

修正後、再度検証を実行して問題が解決されたことを確認する。

## 出力

### 新規コマンド作成時の出力

**コマンドファイル**: ガイドライン準拠のコマンド定義ファイル（.md）

### コマンド検証時の出力

検証レポートを以下の形式で生成する：

```markdown
# コマンド検証レポート

## 基本情報
- **コマンド名**: [command-name]
- **ファイルパス**: [path/to/command.md]
- **総合スコア**: [XX]/100

## 検証結果サマリー

### カテゴリ別評価
- ファイル名: [OK数/WARNING数/ERROR数]
- YAMLフロントマター: [OK数/WARNING数/ERROR数]
- コマンド内容: [OK数/WARNING数/ERROR数]
- 複数スキルの連携: [OK数/WARNING数/ERROR数]
- ベストプラクティス: [OK数/WARNING数/ERROR数]

## 詳細な検証結果

### ファイル名
- [x] ケバブケース: OK
- [ ] 動詞で始まる: WARNING - [詳細]
...

### YAMLフロントマター
...

（チェックリストの各項目を列挙）

## 改善提案

### 高優先度（ERROR項目）
1. [具体的な改善提案]
   - **現状**: [現在の記述]
   - **問題点**: [何が問題か（チェックリスト参照）]
   - **推奨修正**: [具体的な修正案]
   - **理由**: [なぜ修正すべきか]

### 中優先度（WARNING項目）
...

### 低優先度（改善推奨）
...

## 総合評価

[コマンドの総合的な品質評価と主要な改善点のまとめ]
品質レベル: [模範的/優れた品質/良好/許容範囲/改善必要]
```

## 総合スコア

コマンドの品質は[コマンド品質チェックリスト](./command-checklist.md)の方法で100点満点で評価する。

## 注意事項

- **ユーザーとの対話**: 要件が不明確な場合は、推測せずにユーザーに質問する
- **段階的な進行**: 各ステップの完了後、次のステップに進む前にユーザーに確認する
- **既存コマンドの尊重**: 検証時、既存コマンドの意図を理解し、無理な変更を提案しない
- **具体例の提供**: 改善提案時は、具体的な修正例を示す
- **チェックリストの活用**: 検証時は[コマンド品質チェックリスト](./command-checklist.md)のすべての項目を確認し、各項目の基準と具体例を参照する
- **EXAMPLE参照**: [EXAMPLE.md](EXAMPLE.md)
