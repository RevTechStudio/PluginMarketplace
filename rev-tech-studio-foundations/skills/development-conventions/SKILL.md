---
name: development-conventions
description: 曖昧さを排除し一貫性のある開発を実現するための規約。技術選定、コーディング規約、ユーザーとのインタラクションルールを提供する。セッション開始時、開発作業前、または規約・方針について確認が必要なときに使用する。
---

# Development Conventions

開発作業におけるすべての規約とインタラクションルール。

## 目的

開発の一貫性を保ち、ユーザーとの円滑なコミュニケーションを実現するための規約を提供する。

## 責任範囲

- 開発方針と技術選定の規約を提供する
- ユーザーとのインタラクションルールを提供する
- 曖昧さや矛盾を検出し報告する

## 開発規約

### 最重要ルール

#### 曖昧な状態での開発禁止

**要件が不明確な状態で開発を進めない**:

- 仕様や期待される動作が不明確な場合、必ずユーザーに確認する
- 前提条件を明示し、承認を得る
- ドキュメント、要件、仕様に矛盾を発見したら、即座に報告して解決する

**理由:**
- 曖昧さを抱えたまま進めると、大きな手戻りや問題につながる
- 早期の確認でコストと時間を削減できる
- ユーザーとの認識を合わせることで、期待通りの成果を出せる

#### 矛盾を無視しない

**矛盾を発見したら即座に報告する**:

- ドキュメントやコード内の矛盾を発見したら、ユーザーに即座に報告する
- 解決方法をユーザーに確認する
- 質問フォーマットに従って確認する

**理由:**
- 矛盾を放置すると、後で大きな問題になる
- 早期発見・早期解決が最も効率的
- ユーザーが意思決定の主体であるべき

### 基本ルール

#### 一貫性の維持

**プロジェクト全体で一貫性を保つ**:

- コーディング規約に従う
- 統一された命名規則を使用する
- 同じ種類の問題には同じパターンを適用する
- すべてのドキュメントは共通のフォーマットに従う

**理由:**
- 一貫性があると、コードの理解と保守が容易になる
- チームメンバーの認知負荷を下げる
- バグの混入を減らす

#### 技術選定

**最新の安定版を使用する**:

- LTSを含む最新の安定版を使用する
- プレビュー機能は正当な理由がない限り使用しない
- 非推奨のAPIや古い技術を使用しない
- 依存関係は必要最小限にする

**理由:**
- 最新の安定版はセキュリティとパフォーマンスが優れている
- プレビュー機能は破壊的変更のリスクがある
- 依存関係が多いと、メンテナンスコストが増大する

#### プロジェクト規約

**プロジェクト固有の規約**:

- 「API」という用語はWeb APIのみに使用する（混乱を避けるため）
- 例外メッセージとログメッセージは日本語で記述する
- バージョニングはセマンティックバージョニング（SemVer）に従う

**理由:**
- 用語の統一で誤解を防ぐ
- 日本語メッセージでデバッグが容易になる
- SemVerで依存関係管理が明確になる

#### 開発慣行

**品質と保守性を重視する**:

- 主要機能の単体テストは、ユーザーから指示があった場合のみ作成する
- 重要な変更にはコードレビューを実施する
- 技術的負債を定期的に見直し、削減する
- 仮定の将来ニーズに基づく過度な抽象化を避ける

**理由:**
- テストは必要な範囲で実施し、開発速度を保つ
- レビューで品質を担保する
- 技術的負債の蓄積を防ぐ
- 過度な抽象化は複雑性を増し、保守コストを上げる

### インタラクションルール

#### 言語使用

**英語で思考し、日本語でコミュニケーションする**:

- 内部的な推論は英語で行う
- ユーザーとのコミュニケーションは完全に日本語で行う
- 技術用語は適宜英語を使用し、必要に応じて日本語の説明を追加する

**理由:**
- 英語で思考することで、技術情報へのアクセスが容易になる
- ユーザーとは母国語でコミュニケーションすることで、正確な意思疎通ができる

#### 要件の明確化

**曖昧さを許容しない**:

- 要件が不明確な場合、実装やドキュメント作成を進めない
- 仕様、要件、期待される動作が不明確な場合、必ず質問する
- 作業を開始する前に、明確な確認を得る
- 前提を置く必要がある場合、明示的に述べてユーザーの確認を得る

**理由:**
- 曖昧なまま進めると、成果物がユーザーの期待と異なる
- 早期の確認で手戻りを防ぐ

#### 意思決定プロセス

**提案と実行を分離する**:

- 複数の選択肢がある場合、提案してユーザーに決定してもらう
- 大きな変更は小さなステップに分割し、各段階で承認を得る
- 可能な限り代替案を提示し、ユーザーに選択してもらう
- 意図が不明確な場合、必ず確認する

**理由:**
- ユーザーが意思決定の主体であるべき
- 小さなステップで進めることで、方向修正が容易になる

#### 質問と指示の区別

**質問を指示として扱わない**:

- コードをすぐに修正するのではなく、まず回答や提案を提供する
- 「修正してください」「実装してください」などの明示的な指示があるまで、コードを修正しない
- コードを修正する前に、何をどのように変更するかを説明する

**理由:**
- ユーザーは情報を求めているだけの場合がある
- 意図しない変更を防ぐ
- 変更の影響を事前に理解してもらう

#### 質問フォーマット

**ユーザーに質問する際は、以下のフォーマットを使用する**:

```markdown
1. **[質問の背景・理由]**

A. **[Aの選択肢]**: [説明]
B. **[Bの選択肢]**: [説明]
C. **[Cの選択肢]**: [説明]
D. **その他**

**推奨**: **[推奨する選択肢]** - [なぜその選択肢を推奨するのかの具体的な理由]
```

**理由:**
- 背景を明示することで、ユーザーが状況を理解しやすくなる
- 選択肢を提示することで、ユーザーが判断しやすくなる
- 推奨案を示すことで、意思決定を支援する
