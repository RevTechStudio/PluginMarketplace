# スキルガイドライン

プラグイン用スキルの設計と内容作成に関するガイドライン。

## スキルの役割

スキルはClaudeに専門的なワークフローや知識を提供するプロンプト。

## SKILL.mdの構造

スキルの内容（SKILL.md）は以下の要素で構成する：

1. **目的** - このスキルが何を実現するか
2. **責任範囲** - このスキルが何をするか、何をしないか
3. **ワークフロー** - 具体的な実行手順（規約系スキルの場合は不要）
4. **出力** - どのような成果物を生成するか

## 内容の書き方（最重要）

### 1. 何をするか（What）と、なぜそうするか（Why）を記述

単に内容を列挙するだけでなく、その目的や判断基準を明記する。

**良い例:**
```markdown
## 責任範囲

- コードとドキュメントを分析し、矛盾を特定する
  - 早期発見により修正コストを削減する
- 発見した矛盾を重要度で分類し、レポートを作成する
  - 優先順位をつけることで効率的な対応を可能にする

**責任範囲外:**
- 矛盾の修正
  - 修正判断はドメイン知識が必要なため、ユーザーに委ねる
```

**悪い例:**
```markdown
## 責任範囲

- コードとドキュメントを分析する
- レポートを作成する

**責任範囲外:**
- 矛盾の修正
```

### 2. 責任範囲を明確にする

スキルが何をするか、何をしないかを明確に定義する。

**原則:**
- 1つのスキルは1つの明確な責任を持つ
- 責任範囲外のタスクは別のスキルに委譲する

**例: 矛盾検出スキル**
```markdown
## 目的

コードやドキュメント内の矛盾を発見し、報告する。

## 責任範囲

- コードとドキュメントを分析し、矛盾を特定する
- 発見した矛盾を分類し、レポートを作成する
- レポートをユーザーに提示する

**責任範囲外:**
- 矛盾の修正（修正は別のスキルまたはユーザーの判断）
```

**理由:**
- スキルの役割が明確になり、理解しやすくなる
- スキルの組み合わせが容易になる
- メンテナンスが簡単になる

### 3. ドメインロジックに集中する

スキルはビジネスロジックやワークフローに集中し、インフラ的な関心事は含めない。

**含めるべき内容:**
- ビジネスルール
- ドメイン知識
- 判断基準
- ワークフロー
- 生成するコンテンツの構造と内容

**含めるべきでない内容:**
- ファイルパス
- ディレクトリ構造
- 環境依存の設定
- プロジェクト固有の構造

### 4. ファイルパスは記述しない

スキルの成果物がファイルとして存在する場合でも、ファイルパスはスキルに記述しない。

**理由:**
- スキルの再利用性を高める
- プロジェクト固有の構造への依存を避ける

**実装:**
- コマンド経由の場合：「コマンドで指定されたパスに保存する」
- 直接呼び出しの場合：「保存先をユーザーに確認する」

### 5. 具体的な判断基準を示す

抽象的な表現を避け、Claudeが具体的に判断できる基準を記述する。

**良い例:**
```markdown
以下の場合は実装を開始する前にユーザーに確認する：
- 既存のファイルを削除する必要がある場合
- 3つ以上のファイルを変更する場合
- アーキテクチャの変更を伴う場合
```

**悪い例:**
```markdown
必要に応じてユーザーに確認する
```

### 6. 対話的なワークフローを明示する

ユーザーとの対話が必要な場合、そのタイミングと内容を明確にする。

**例:**
```markdown
### ワークフロー

1. 要求を分析し、以下を特定する：
   - 機能の範囲
   - 技術的制約
   - 優先順位

2. 不明点がある場合は、実装前にユーザーに質問する

3. ユーザーが承認した後、実装を開始する
```

## 設計原則

### 汎用性

スキルは特定のプロジェクトに依存せず、汎用的に使用できるように設計する。

**チェックポイント:**
- 異なるプロジェクトで再利用可能か
- プロジェクト固有の前提に依存していないか
- 環境依存の設定がハードコードされていないか

### 明確性

曖昧な表現を避け、Claudeが迷わず実行できる内容にする。

**チェックポイント:**
- 各ステップの目的が明確か
- 判断基準が具体的か
- ユーザーとの対話のタイミングが明示されているか

### 簡潔性

必要な情報を欠かさず、冗長な説明は省く。

**チェックポイント:**
- 自明な手順の詳細説明を省いているか
- 重複した内容を避けているか
- 判断の根拠や文脈は残しているか

## チェックリスト

- [ ] 目的、責任範囲、ワークフロー（規約系以外）、出力が明記されている
- [ ] 各ステップに「なぜそうするか」の理由が付与されている
- [ ] スキルの責任範囲が明確に定義されている
- [ ] ファイルパスがスキルに記述されていない
- [ ] ドメインロジックに集中し、インフラ的関心事が含まれていない
- [ ] 具体的な判断基準が示されている
- [ ] ユーザーとの対話のタイミングが明確である
- [ ] 汎用的で再利用可能な設計になっている
- [ ] 簡潔かつ明確に記述されている
