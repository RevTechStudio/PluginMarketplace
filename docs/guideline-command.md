# コマンドガイドライン

プラグイン用コマンドの設計と内容作成に関するガイドライン。

## コマンドの役割

コマンドはユーザーが特定のタスクを実行するためのエントリーポイント。

**主な責任:**
- スキルを呼び出す
- プロジェクト固有の設定（ファイルパスなど）を定義する
- ユーザーに対して明確な指示を提供する

## コマンドファイルの構造

コマンドファイルは以下の要素で構成する：

1. **タスクの説明** - このコマンドが何をするか
2. **スキルの呼び出し** - 使用するスキル名（スキルを使用しない場合は除外）
3. **プロジェクト固有の設定** - ファイルパス、出力先など

## 命名規則

### ファイル名

- ケバブケース（kebab-case）を使用する
- 動詞で始める
- 具体的で分かりやすい名前にする

**良い例:**
- `analyze-project.md`
- `generate-docs.md`
- `check-consistency.md`

**悪い例:**
- `analyze.md`（抽象的すぎる）
- `project_analyze.md`（スネークケース）
- `ProjectAnalyze.md`（キャメルケース）

## 内容の書き方

### 1. スキルの呼び出しを明確にする

使用するスキル名を明示的に記述する。

**良い例:**
```markdown
project-analyzerスキルを使用してプロジェクトを分析する。

分析結果は以下のパスに保存：
- ./.spec/analysis-result.md
```

**悪い例:**
```markdown
プロジェクトを分析してください。
```

### 2. ファイルパスを明示する

スキルが生成する成果物のファイルパスをコマンド側で定義する。

**理由:**
- スキルの再利用性を維持する
- プロジェクト固有の構造をコマンドに集約する

**実装例:**
```markdown
brainstormスキルを使用してアイディアを深掘りする。

生成したドキュメントは以下のパスに保存：
- ./.spec/idea.md
```

### 3. 簡潔かつ具体的に記述する

コマンドは短く、必要な情報のみを含める。

**良い例:**
```markdown
consistency-checkerスキルを使用してコードとドキュメントの整合性を確認してください。

レポートの保存先：
- ./reports/consistency_check.md
```

**悪い例:**
```markdown
consistency-checkerスキルを使用してコードとドキュメントの整合性を確認してください。
このスキルはコードベースとドキュメントを分析し、矛盾を発見します。
発見した矛盾は分類され、レポートとして出力されます。
レポートには矛盾の種類、場所、推奨される対応が含まれます。

レポートの保存先：
- ./reports/consistency_check.md
```

**理由:**
- スキルの詳細な説明はSKILL.mdに記載されている
- コマンドには実行に必要な情報のみを記載する

### 4. 複数のスキルを連携させる場合

複数のスキルを使用する場合、実行順序と目的を明確にする。

**例:**
```markdown
以下の手順でプロジェクトを分析してください：

1. project-analyzerスキルでプロジェクト構造を分析
   - 結果を./.spec/project_structure.mdに保存

2. consistency-checkerスキルで整合性を確認
   - 結果を./reports/consistency_check.mdに保存

3. 両方のレポートを統合し、改善提案をまとめる
   - 結果を./reports/improvement_suggestions.mdに保存
```

### 5. オプション設定がある場合

スキルにオプション設定がある場合、コマンドで明示的に指定する。

**例:**
```markdown
document-generatorスキルを使用してAPIドキュメントを生成してください。

設定：
- 対象: src/api/**/*.ts
- フォーマット: Markdown
- 出力先: ./docs/api/

詳細度: 高（内部実装の説明を含める）
```

## 設計原則

### シンプルさ

コマンドは1つの明確な目的を持つ。

**チェックポイント:**
- このコマンドが何をするか一目で分かるか
- 複数の異なるタスクを含んでいないか

### プロジェクト固有性

コマンドにはプロジェクト固有の設定を含めてよい。

**含めてよい内容:**
- ファイルパス
- ディレクトリ構造
- プロジェクト固有の設定値

**理由:**
- スキルを汎用的に保つため
- プロジェクト固有の設定をコマンドに集約する

## チェックリスト

- [ ] ファイル名がケバブケースで、動詞で始まっている
- [ ] 使用するスキル名が明示されている
- [ ] 成果物のファイルパスが指定されている
- [ ] 簡潔で分かりやすい内容である
- [ ] スキルの詳細な説明を含んでいない
- [ ] 複数のスキルを使用する場合、実行順序が明確である
