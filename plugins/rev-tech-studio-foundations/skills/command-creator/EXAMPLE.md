# Command Creator 使用例

このドキュメントでは、command-creatorスキルの典型的な使用例を示します。

## 例1: 新規コマンド作成（単一スキル使用）

### ユーザーからの依頼

「プロジェクトのコードの複雑度を分析するコマンドを作りたい」

### 実施内容

#### ステップ1: 要件ヒアリング

コマンドクリエイターは以下の質問を行います:

```text
コマンド作成のために要件定義を行います。
質問に回答してください。

1. このコマンドの目的は何ですか?
回答: プロジェクトのコードの複雑度を分析して、改善が必要な箇所を特定する

2. 具体的にどのスキルを使用しますか?
回答: complexity-analyzerスキル

3. どこに成果物を保存しますか?（ファイルパス）
回答: ./.spec/complexity-report.md

4. 引数は必要ですか?
回答: いいえ

5. 類似の既存コマンドはありますか?
回答: /rt:analyzeが似ている構造です
```

#### ステップ2: コマンド設計

設計概要をユーザーに提示します:

```text
以下の設計でコマンドを作成します：

コマンド名: analyze-complexity.md
Description: コードの複雑度を分析し、改善が必要な箇所を特定する
使用スキル: complexity-analyzer
保存先: ./.spec/complexity-report.md

この設計で進めてもよろしいですか?
```

#### ステップ3: コマンドファイル生成

設計に基づき、以下のコマンドファイルを生成します:

```markdown
---
description: コードの複雑度を分析し、改善が必要な箇所を特定する
---

# Analyze Complexity

complexity-analyzerスキルを使用してプロジェクトのコードの複雑度を分析する。

分析結果は以下のパスに保存：
- ./.spec/complexity-report.md
```

#### ステップ4: 最終検証

生成されたコマンドに対して検証を実行し、結果をユーザーに報告します。

---

## 例2: 新規コマンド作成（複数スキル連携）

### ユーザーからの依頼

「プロジェクトの分析から要件定義まで一連の流れを実行するコマンドを作りたい」

### 実施内容

#### ステップ1: 要件ヒアリング

```text
1. このコマンドの目的は何ですか?
回答: プロジェクトを分析して、要件定義書を作成するまでの一連の流れを実行する

2. 具体的にどのスキルを使用しますか?
回答: project-analyzerとrequirements-definition

3. どこに成果物を保存しますか?
回答:
- プロジェクト分析: ./.spec/project-analysis.md
- 要件定義: ./.spec/requirements.md

4. 実行順序はどうしますか?
回答: まずproject-analyzerでプロジェクトを分析し、その結果を基にrequirements-definitionで要件定義を作成
```

#### ステップ2: コマンド設計

```text
コマンド名: full-analysis.md
Description: プロジェクトを分析し、要件定義書を作成する
使用スキル: project-analyzer → requirements-definition
保存先:
  - ./.spec/project-analysis.md
  - ./.spec/requirements.md

この設計で進めてもよろしいですか?
```

#### ステップ3: コマンドファイル生成

```markdown
---
description: プロジェクトを分析し、要件定義書を作成する
---

# Full Analysis

## 作業内容

以下の手順でプロジェクトの分析から要件定義まで実行：

1. project-analyzerスキルでプロジェクト構造を分析
   - 結果を./.spec/project-analysis.mdに保存

2. requirements-definitionスキルで要件定義書を作成
   - 結果を./.spec/requirements.mdに保存

作業完了後、ユーザーに提示する:

\`\`\`markdown
プロジェクト分析と要件定義が完了しました。

次は\`/rt:design\`コマンドを実行して詳細設計を行ってください。
\`\`\`
```

---

## 例3: 引数を使用するコマンド作成

### ユーザーからの依頼

「PR番号を指定してレビューを実行するコマンドを作りたい」

### 実施内容

#### ステップ1: 要件ヒアリング

```text
1. このコマンドの目的は何ですか?
回答: GitHub PRをレビューして、コードの品質をチェックする

2. 具体的にどのスキルを使用しますか?
回答: code-reviewer

3. 引数は必要ですか?
回答: はい、PR番号が必要

4. どこに成果物を保存しますか?
回答: ./reports/pr-review-{PR番号}.md
```

#### ステップ2: コマンド設計

```text
コマンド名: review-pr.md
Description: 指定されたPRをレビューし、コード品質をチェックする
使用スキル: code-reviewer
引数: PR番号
保存先: ./reports/pr-review-{PR番号}.md

この設計で進めてもよろしいですか?
```

#### ステップ3: コマンドファイル生成

```markdown
---
description: 指定されたPRをレビューし、コード品質をチェックする
argument-hint: [pr-number]
---

# Review PR

code-reviewerスキルを使用してPR #$1をレビューする。

レビュー結果は以下のパスに保存：
- ./reports/pr-review-$1.md
```

---

## 例4: 既存コマンドの検証

### ユーザーからの依頼

「既存の/rt:analyzeコマンドがガイドラインに準拠しているか検証してください」

### 実施内容

#### ステップ1: コマンドを読み込む

指定されたコマンドファイルを読み込みます。

#### ステップ2-3: 検証を実行し、問題点を特定

[コマンド品質チェックリスト](./command-checklist.md)に基づき検証を実施し、問題点をリストアップします。

#### ステップ4: 改善提案を生成

```markdown
# コマンド検証レポート

## 基本情報
- コマンド名: analyze
- ファイルパス: rev-tech-studio-sdd/commands/rt/analyze.md
- 総合スコア: 92/100

## 検証結果サマリー

### カテゴリ別評価
- ファイル名: 3/3 OK
- YAMLフロントマター: 2/2 OK, 1 WARNING
- コマンド内容: 3/3 OK
- ベストプラクティス: 2/2 OK, 1 WARNING

## 改善提案

### 中優先度（WARNING項目）

1. YAMLフロントマターのallowed-toolsが空
   - 現状: allowed-tools: （空）
   - 問題点: 不要なフィールドが残っている
   - 推奨修正: allowed-toolsフィールドを削除する
   - 理由: 使用しないフィールドは削除してシンプルに保つ

## 総合評価

コマンドは全体的に高品質です。ガイドラインに準拠しており、
明確で簡潔な記述です。軽微な改善項目のみです。

品質レベル: 優れた品質
```

---

## 例5: 既存コマンドの改善

### ユーザーからの依頼

「既存の/brainstormコマンドに、ユーザーへの完了メッセージを追加したい」

### 実施内容

#### ステップ1: コマンドを読み込む

既存のコマンドファイルを読み込みます。

#### ステップ2-4: 検証と改善提案

現在の構造を確認し、改善案を提示します:

```text
以下の改善を提案します：

現在のコマンド:
- ユーザーへのフィードバックがない
- 次のステップが不明確

改善案:
- 作業完了後にメッセージを追加
- 次のコマンド(/rt:design)を提案

この改善案でよろしいですか?
```

#### ステップ5: 改善版を生成

```markdown
---
allowed-tools:
argument-hint:
description: プロジェクトのアイディアを深掘りし、方向性を明確化する
---

# Brainstorm

brainstormingスキルを使用してプロジェクトのアイディアを深掘りする。

アイディア深掘りの結果は以下のパスに保存：
- ./.spec/idea.md

作業完了後、ユーザーに提示する:

\`\`\`markdown
アイディアの深掘りが完了しました。

次は\`/rt:design\`コマンドを実行して詳細設計を行ってください。
\`\`\`
```

---

## ヒント

- **要件が不明確な場合**: コマンドクリエイターは積極的に質問します
- **段階的な承認**: 各ステップで確認を求めるため、安心して進められます
- **柔軟な対応**: 必要に応じてテンプレートを調整するなど、状況に合わせた対応が可能です
- **既存コマンドの参考**: 類似コマンドがある場合、その構造を参考にします
- **スキルの有無**: スキルを使用しないコマンドも作成可能です
