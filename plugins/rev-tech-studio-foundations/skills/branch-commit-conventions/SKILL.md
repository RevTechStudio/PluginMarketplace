---
name: branch-commit-conventions
description: ブランチ、コミット、プルリクエストの命名規則とフォーマット規約。Conventional Commitsに準拠した形式を提供する。ブランチ作成時、コミットメッセージ記述時、プルリクエスト作成時に使用する。
---

# Branch and Commit Conventions

ブランチ、コミット、プルリクエストにおける統一された規約。

## 目的

プロジェクト全体でブランチ、コミット、プルリクエストの一貫性を保ち、履歴の可読性と追跡性を向上させるための規約を提供する。

## 責任範囲

- ブランチ命名規則を提供する
- コミットメッセージのフォーマット規約を提供する
- プルリクエストのフォーマット規約を提供する
- Conventional Commitsに準拠した形式を保証する

## ブランチおよびコミット規約

### ブランチ命名規則

**プレフィックスで目的を明確にする**:

- `main`: メインブランチ（本番相当）
- `feat/*`: 新機能開発ブランチ
- `fix/*`: バグ修正ブランチ
- `refactor/*`: リファクタリングブランチ
- `env/*`: 環境構築・設定ブランチ
- `claude/*`: Claude Codeにより自動管理されるブランチ

**理由:**
- プレフィックスにより、ブランチの目的が一目で分かる
- 作業の種類ごとに整理でき、管理しやすい
- 自動化ツールがブランチを識別しやすい

### コミットメッセージ規約

**Conventional Commitsに準拠する**:

参照: <https://www.conventionalcommits.org/en/v1.0.0/>

#### 基本フォーマット

```
<type>: <description>

[optional body]

[optional footer(s)]
```

#### ルール

**型（type）を明確にする**:

- `feat`: 新機能
- `fix`: バグ修正
- `refactor`: リファクタリング（機能変更なし）
- `docs`: ドキュメントのみの変更
- `style`: 意味に影響しないコード変更（整形、セミコロン等）
- `test`: テスト追加または変更
- `chore`: ビルドやツール等の変更

**記述のルール**:

- scopeは使用しない
- description: 日本語または英語で記述
- body: 日本語または英語で記述（任意、箇条書き推奨）
- 関連issueがある場合: フッターに `Refs: #issue_number` を追加推奨

**理由:**
- Conventional Commitsにより、変更の種類が明確になる
- 自動化ツール（changelog生成など）が利用可能になる
- コミット履歴が検索しやすくなる
- bodyの箇条書きにより、変更内容が理解しやすい
- issue参照により、コミットと課題の紐付けが明確になる

#### コミットメッセージ例

```text
feat: ユーザー認証を追加

- OAuth 2.0 を使用して認証を実装
- Google, GitHub, GitLab に対応

Refs: #123
```

```text
fix: ログイン画面のレイアウト崩れを修正

- モバイル表示時の幅の問題を解決
- フォームの配置を調整

Refs: #456
```

```text
refactor: API 呼び出しロジックを再構成

- 共通処理を関数に抽出
- エラーハンドリングを統一
```

### プルリクエスト規約

#### PRタイトル

**コミットメッセージと同じ形式を使用する**:

- 形式: `<type>: <description>`
- description: 日本語または英語で記述
- 関連issueがある場合: タイトル末尾に `( #issue_number )` を付けることを推奨

**理由:**
- コミットとPRで統一された形式により、一貫性が保たれる
- PRの目的が一目で分かる
- issue番号をタイトルに含めることで、課題との関連が明確になる

#### PRタイトル例

```
feat: ダークモード切替を追加
fix: ログイン画面のレイアウト崩れを修正
refactor: API 呼び出しロジックを再構成 ( #321 )
docs: README に環境構築手順を追加 ( #234 )
```

#### PR本文

**変更内容を詳細に記述する**:

- **何を変更したか**: 実装した機能、修正内容
- **なぜ変更したか**: 背景と目的

**理由:**
- 変更の背景と目的を明確にすることで、レビューが効率的になる
- 将来のメンテナンスで変更の意図を理解しやすい

#### PR本文例

```markdown
## 変更内容

ユーザーがダークモードとライトモードを切り替えられる機能を追加。

## 変更理由

多くのユーザーからダークモードの要望があり、視認性向上とユーザー体験改善を目的とする。

## 実装詳細

- トグルスイッチコンポーネントを追加
- localStorage にテーマ状態を保存
- CSS カスタムプロパティでテーマを管理

## テスト

- ダークモード/ライトモードの切り替え動作を確認
- リロード後もテーマが保持されることを確認
```

**理由:**
- 実装詳細により、レビュアーが変更を理解しやすい
- テストセクションにより、品質が保証される
