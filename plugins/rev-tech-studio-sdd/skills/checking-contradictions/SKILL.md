---
name: checking-contradictions
description: プロジェクト全体の矛盾を検出し報告する。ドキュメント間、ドキュメントとコード間、規約との不整合、設定ファイル間の矛盾をチェックし、シンプルなリスト形式で報告する。ユーザーが矛盾チェックを明示的に指示したときに使用する。
---

# Checking Contradictions

プロジェクト全体の矛盾を検出し、早期発見・早期解決を実現する。

## 目的

開発プロジェクトにおける矛盾を体系的に検出し報告することで、手戻りや問題の発生を防ぐ。development-conventionsの「矛盾を無視しない」ルールを実践し、ドキュメント、コード、規約、設定ファイル間の不整合を早期に発見する。

## 責任範囲

- ドキュメント間の矛盾を検出する
  - 要件定義、設計書、仕様書など、複数ドキュメント間の記述の不一致を発見する
  - 同一プロジェクト内で異なる記述や相反する内容を特定する
- ドキュメントとコード間の矛盾を検出する
  - ドキュメントの記述と実際のコード実装の乖離を発見する
  - 仕様書に記載された機能とコードの実装の不一致を特定する
- 規約との矛盾を検出する
  - development-conventions等の規約とコード/ドキュメントの不整合を発見する
  - コーディング規約、命名規則、プロジェクト固有ルールへの違反を特定する
- 設定ファイル間の矛盾を検出する
  - package.json、tsconfig.json、.envファイル等の設定の不整合を発見する
  - 依存関係やバージョン、環境変数の矛盾を特定する
- 矛盾をシンプルなリスト形式で報告する
  - 発見した矛盾を箇条書きで明確に報告する
  - 矛盾箇所と矛盾内容を具体的に示す

**責任範囲外:**
- 矛盾の自動修正
  - 修正はユーザーの意思決定が必要であり、このスキルは報告のみを行う
- 矛盾の優先順位付けや影響度判断
  - ビジネス判断や影響範囲の評価はユーザーが行う
- 解決策の実装提案
  - 矛盾を報告するのみで、具体的な実装方法の提案や修正作業は行わない

## ワークフロー

### 矛盾チェック実行

このチェックリストをコピーして進捗を追跡します：

```
矛盾チェック進捗：
- [ ] ステップ1：チェック範囲を特定する
- [ ] ステップ2：ドキュメント間の矛盾をチェックする
- [ ] ステップ3：ドキュメントとコード間の矛盾をチェックする
- [ ] ステップ4：規約との矛盾をチェックする
- [ ] ステップ5：設定ファイル間の矛盾をチェックする
- [ ] ステップ6：矛盾リストを報告する
```

**ステップ1：チェック範囲を特定する**

プロジェクト全体を把握し、チェック対象を特定する：
- プロジェクトのディレクトリ構造を確認する
- 存在するドキュメントファイル（.md、.txt等）をリストアップする
- コードファイルの種類と配置を確認する
- 設定ファイル（package.json、tsconfig.json、.env等）を特定する
- 規約ファイル（conventions.md、coding-standards.md等）を確認する

ユーザーから特定のファイルやディレクトリの指定がある場合は、その範囲に絞る。

**ステップ2：ドキュメント間の矛盾をチェックする**

複数のドキュメント間で矛盾する記述を検出する：
- 同じ概念や機能について異なる記述がないか確認する
- 用語の定義が一貫しているか確認する
- バージョン情報や日付の不整合を確認する
- 相反する要件や仕様が記載されていないか確認する

以下のような矛盾を特定する：
- 要件定義と設計書で異なる仕様が記述されている
- README.mdとドキュメントで異なる用語が使われている
- 複数のドキュメントで矛盾する手順や方法が説明されている

**ステップ3：ドキュメントとコード間の矛盾をチェックする**

ドキュメントの記述と実際のコード実装の乖離を検出する：
- ドキュメントに記載された機能がコードに実装されているか確認する
- 関数名、クラス名、変数名がドキュメントと一致しているか確認する
- APIエンドポイント、パラメータ、レスポンス形式が一致しているか確認する
- ドキュメントで廃止とされた機能がコードに残っていないか確認する

以下のような矛盾を特定する：
- ドキュメントに記載された関数がコードに存在しない
- APIドキュメントと実装で異なるパラメータが使われている
- 設計書の記述とコードの実装ロジックが異なる

**ステップ4：規約との矛盾をチェックする**

プロジェクトの規約とコード/ドキュメントの不整合を検出する：
- development-conventions等の規約ファイルを読み込む
- コーディング規約への違反を確認する
- 命名規則の違反を確認する
- プロジェクト固有ルールへの違反を確認する
- ドキュメント規約への違反を確認する

以下のような矛盾を特定する：
- 規約で禁止されているAPIや技術が使用されている
- 命名規則に従っていない変数名やファイル名がある
- 規約で定められた形式と異なるドキュメント構造になっている

**ステップ5：設定ファイル間の矛盾をチェックする**

複数の設定ファイル間の不整合を検出する：
- package.jsonの依存関係とlock fileの整合性を確認する
- 環境変数の定義と使用箇所の一致を確認する
- 複数の設定ファイルで同じ項目の値が一致しているか確認する
- バージョン情報の整合性を確認する

以下のような矛盾を特定する：
- package.jsonとpackage-lock.jsonのバージョンが不一致
- .envファイルで定義されていない環境変数がコードで使用されている
- tsconfig.jsonとpackage.jsonで異なるTypeScriptバージョンが指定されている

**ステップ6：矛盾リストを報告する**

検出した矛盾をシンプルなリスト形式で報告する。

矛盾が検出されなかった場合は、その旨を報告する。

## 出力

### 矛盾チェック結果

```markdown
## 矛盾チェック結果

### ドキュメント間の矛盾
- [ファイル名1] と [ファイル名2]: [矛盾内容の説明]
- [ファイル名3] と [ファイル名4]: [矛盾内容の説明]

### ドキュメントとコード間の矛盾
- [ドキュメントファイル名] と [コードファイル名]: [矛盾内容の説明]
- [ドキュメントファイル名] と [コードファイル名]: [矛盾内容の説明]

### 規約との矛盾
- [ファイル名]: [規約違反の内容]
- [ファイル名]: [規約違反の内容]

### 設定ファイル間の矛盾
- [設定ファイル名1] と [設定ファイル名2]: [矛盾内容の説明]
- [設定ファイル名1] と [設定ファイル名2]: [矛盾内容の説明]

**矛盾総数**: X件
```

矛盾が検出されなかった場合の出力：

```markdown
## 矛盾チェック結果

矛盾は検出されませんでした。

**チェック範囲**:
- ドキュメント: X件
- コードファイル: X件
- 設定ファイル: X件
- 規約ファイル: X件
```

## 注意事項

- **ユーザーの明示的な指示**: このスキルはユーザーが矛盾チェックを明示的に指示したときのみ使用する
- **報告のみ**: 矛盾を発見しても、自動的に修正せず、ユーザーに報告する
- **範囲の確認**: チェック範囲が広い場合は、ユーザーに確認してから実行する
- **false positive**: 意図的な違いを矛盾として誤検出する可能性があるため、報告内容はユーザーが最終判断する
- **development-conventionsとの連携**: 矛盾を発見したら、development-conventionsの「質問フォーマット」に従ってユーザーに確認することが推奨される
