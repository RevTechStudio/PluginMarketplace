---
name: project-analyzer
description: 既存プロジェクトのドキュメントとソースコードから情報を収集し、構造化されたドキュメントを生成する。brainstormスキルの前段階で使用し、プロジェクトの全体像を把握する。
---

# Project Analyzer

## 目的

既存プロジェクトから以下の情報を収集し、構造化されたドキュメントを生成する：

- プロジェクト概要
- 技術スタック
- ディレクトリ構造
- 主要機能
- 設計思想・アーキテクチャ

## 責任範囲

- プロジェクト内の重要なファイルを特定し、情報を抽出する
  - 効率的に全体像を把握するため、優先度の高いファイルから探索する
- 収集した情報を構造化されたドキュメントにまとめる
  - 後続のbrainstormスキルや開発作業で参照しやすい形式で整理する
- ドキュメントとソースコード間の矛盾点を特定する
  - 早期発見により、誤った前提に基づく開発を防ぐ

**責任範囲外:**

- 矛盾点の修正
  - 修正判断にはドメイン知識が必要なため、ユーザーに委ねる
- プロジェクトの改善提案
  - 現状把握に集中し、評価や提案は行わない
- 推測による情報の補完
  - 不正確な情報は誤った意思決定を招くため、確認できた事実のみを記載する

## ワークフロー

### 1. 重要ファイルの特定

プロジェクトルートから以下を優先的に探索する。
重要度の高いファイルから調査することで、効率的にプロジェクトの全体像を把握する。

**ドキュメント類（優先度: 高）:**

- README.md / README.txt
  - プロジェクトの概要と目的を把握する
- docs/ ディレクトリ内のファイル
  - 詳細な仕様や設計を確認する
- ARCHITECTURE.md / DESIGN.md
  - システムの設計思想を理解する
- *.csproj / packages.config / Directory.Build.props
  - 使用技術と依存関係を特定する

**ソースコード（優先度: 中）:**

- メインエントリーポイント（Program.cs, Startup.cs, App.xaml.csなど）
  - アプリケーションの起動処理と構造を把握する
- 設定ファイル（appsettings.json, web.config, app.config）
  - データベースや外部サービスの利用を確認する
- 主要なディレクトリ内のコアファイル
  - 実装の詳細を理解する

### 2. 情報収集

各ファイルから必要な情報を抽出する。
確認できた事実のみを記載し、推測や想像で補完しない。

**プロジェクト概要:**

- READMEの冒頭説明からプロジェクトの目的を抽出
- 対象ユーザーや用途を確認

**技術スタック:**

- 言語をファイル拡張子から判断
- フレームワーク・ライブラリを依存関係ファイルから抽出
- データベースを設定ファイルから確認

**ディレクトリ構造:**

- 主要ディレクトリとその役割を分析
- ファイル配置のパターンを把握

**主要機能:**

- READMEに記載された機能リストを抽出
- ソースコードから読み取れる主要な処理を確認

**設計思想・アーキテクチャ:**

- アーキテクチャドキュメントの内容を抽出
- コード構造から読み取れる設計パターンを確認

### 3. 矛盾点の解析

収集した情報をレビューし、以下の観点で矛盾を特定する。
矛盾点の早期発見により、誤った前提に基づく開発を防ぐ。

- ドキュメント間の記述の不一致
  - 例: READMEとARCHITECTURE.mdで異なる技術スタックが記載されている
- ドキュメントと実際のコードの相違
  - 例: ドキュメントに記載された機能が実装されていない
- 設定ファイルとドキュメントの不整合
  - 例: 異なるデータベースが記載されている

**注意:** 矛盾点の修正は行わず、ドキュメントに記述するのみとする。

### 4. ドキュメント生成

収集した情報を構造化されたマークダウン形式でまとめる。
情報が確認できなかった項目は「情報なし」と明記し、推測で補完しない。

### 5. 完了通知

生成したドキュメントの場所をユーザーに伝える。

## 出力

以下の構造を持つマークダウン形式のプロジェクト分析ドキュメント：

```markdown
# プロジェクト分析結果

## プロジェクト概要
[概要を記載。なければ「情報なし」]

## 技術スタック
- 言語: [言語名]
- フレームワーク: [フレームワーク名]
- データベース: [DB名または「情報なし」]
- その他: [その他の技術]

## ディレクトリ構造
[主要ディレクトリとその役割。なければ「情報なし」]

## 主要機能
- [機能1]
- [機能2]
- [なければ「情報なし」]

## 設計思想・アーキテクチャ
[設計思想やアーキテクチャの説明。なければ「情報なし」]

## 矛盾点
[ドキュメント間やドキュメント・ソース間の矛盾点を説明。なければ「なし」]
```

**保存先:**
- コマンド経由で呼び出された場合: コマンドで指定されたパスに保存
- 直接呼び出された場合: 保存先をユーザーに確認してから保存
