---
name: requirements-definition
description: プロジェクトのアイディアを、実装可能な要件定義書に落とし込むスキル。機能要件と非機能要件を明確にし、開発の指針を提供する。要件定義、要求仕様、機能要件、非機能要件について言及している場合に使用してください。
---

# Requirements Definition

## 目的

プロジェクトのアイディアを、実装可能な要件定義書に落とし込む。

## 責任範囲

- プロジェクトアイディアから機能要件を抽出する
  - プロジェクトの目的を具体的な機能として定義し、実装の方向性を明確にする
- 非機能要件を定義する
  - パフォーマンス、セキュリティ、保守性などの品質特性を明確にする
- ユーザーストーリーを作成する
  - ユーザー視点で機能を記述し、価値を明確にする
- 要件の優先順位を明確にする
  - 開発順序を決定し、リソースを効率的に配分する
- 要件定義書をドキュメント化する
  - 後工程で参照できる形で要件を記録する

**責任範囲外:**

- 技術スタック・フレームワークの選定
  - 実装フェーズで技術的制約や要件を考慮して決定する
- データベース設計（テーブル設計、ER図など）
  - 詳細設計フェーズで要件に基づいて設計する
- アーキテクチャ設計（システム構成、デザインパターンなど）
  - 詳細設計フェーズで非機能要件に基づいて設計する
- コードや疑似コードの記述
  - 要件定義は「何を作るか」に集中し、「どう作るか」は含まない
- UIデザインの具体的な作成（ワイヤーフレーム、モックアップなど）
  - 要件レベルでの画面仕様に留め、詳細なデザインは別フェーズで行う
- 実装の詳細や具体的な処理フロー
  - 要件として必要な振る舞いを定義し、実装方法は開発者に委ねる

## ワークフロー

### 1. プロジェクトアイディアの確認

プロジェクトアイディアドキュメントの内容を読み込む。
- プロジェクトの全体像を把握し、要件定義の基盤とする

**読み込みの手順:**

1. 入力ファイルパスが指定されている場合は、そのファイルを読み込む
2. 入力ファイルパスが指定されていない場合は、ユーザーに確認する
3. ドキュメントが存在しない場合は、最低限の情報を確認する

**確認する項目:**

- プロジェクト概要
- ターゲットユーザー
- 解決する課題
- 差別化ポイント（あれば）

**質問例（入力ファイルパスが不明な場合）:**

```text
プロジェクトアイディアのドキュメントパスを教えてください。

もしくは、以下の情報を簡潔に教えてください：
- プロジェクトの概要
- ターゲットユーザー
- 解決したい課題
```

### 2. 機能要件の洗い出し

プロジェクトに必要な機能を具体的にリストアップする。
- 漏れなく機能を特定し、実装の範囲を明確にする

**洗い出しの原則:**

- **ユーザー視点で考える**
  - ユーザーが何をしたいか、何を達成したいかを基準にする
- **具体的に記述する**
  - 曖昧な表現を避け、明確な機能として定義する
- **実装の詳細は含めない**
  - 「何を」に集中し、「どのように」は含めない
- **コードや疑似コードは書かない**
  - 要件定義は実装方法ではなく、必要な機能を定義する

**洗い出し方法:**

1. プロジェクトアイディアから機能を抽出する
2. ユーザーとの対話で不足している機能を補完する

**対話の例:**

```text
プロジェクトアイディアから以下の機能が必要と判断しました：

- ユーザー登録・ログイン
- 読書記録の作成・編集・削除
- 本の検索
- 読書メモの作成
- 読んだ本の統計表示
- 友人との読書記録共有

他に必要な機能はありますか？
```

**注意:** ユーザーの回答を待ってから次のステップへ進む。

### 3. 非機能要件の定義

システムの品質特性を定義する。
- 開発・運用の方針を明確にし、後工程での手戻りを防ぐ

**定義する項目:**

#### パフォーマンス要件

- レスポンス時間の目標
- 同時接続数の想定
- データ量の見込み

**注意:** 具体的な数値目標を設定するが、技術的な実装方法（キャッシュ戦略、インデックス設計など）は範囲外

#### セキュリティ要件

- 認証・認可の必要性
- データの保護レベル
- プライバシー保護の方針

**注意:** 要件レベルでの方針を定義し、具体的な実装技術（JWT、OAuth2など）の選定は範囲外

#### 可用性要件

- サービスの稼働時間目標
- ダウンタイムの許容範囲
- バックアップの必要性

#### 保守性要件

- コードの可読性・保守性の方針
- ドキュメント化の要求
- テストの方針

**注意:** 方針レベルの定義に留め、具体的なテスト戦略やCI/CDの設計は範囲外

#### 互換性要件

- 対応ブラウザ・デバイス
- 既存システムとの連携要件
- データ移行の必要性

**対話の例:**

```text
非機能要件について確認させてください。

【パフォーマンス】
想定ユーザー数はどのくらいですか？
A. 100人未満（個人・小規模）
B. 100〜1000人（中規模）
C. 1000人以上（大規模）

【推奨：B】中規模を想定すると、拡張性を考慮した設計ができます
```

**注意:** 一問一答形式を厳守する。ユーザーの回答を待ってから次の質問へ進む。

### 4. ユーザーストーリーの作成

機能要件をユーザーストーリー形式で記述する。
- ユーザー視点で価値を明確にし、開発の目的を共有する

**ユーザーストーリーの形式:**

```text
【ユーザーストーリー形式】
〈誰が〉として、〈何を〉したい。なぜなら〈価値・理由〉だから。

【受け入れ基準】
- 〈条件1〉
- 〈条件2〉
```

**作成の原則:**

- **ユーザー視点で記述する**
  - システムの都合ではなく、ユーザーの目的を中心にする
- **価値を明確にする**
  - なぜその機能が必要かを説明する
- **受け入れ基準を具体的にする**
  - 機能が完成したと判断できる基準を明確にする
- **実装の詳細は含めない**
  - 「何ができるか」に集中し、「どう実装するか」は含めない

**ユーザーストーリーの例:**

```text
【ユーザーストーリー: 読書記録の作成】
読書好きの大学生として、読んだ本の記録を残したい。なぜなら、後から読書履歴を振り返りたいから。

【受け入れ基準】
- 本のタイトル、著者、読了日を入力できる
- 読書メモ（感想、引用など）を自由に記述できる
- 記録した内容を後から閲覧できる
- 記録した内容を編集・削除できる
```

**注意:** 技術的な実装（データベース設計、API設計など）は記述しない。

### 5. 要件の優先順位付け

要件の優先順位を明確にする。
- 開発の順序を決定し、効率的に価値を提供する

**優先順位の基準:**

- **P1（最優先）** - プロジェクトの核となる機能。これがないとサービスが成立しない
- **P2（高優先）** - 重要な機能。初期リリースに含めるべき
- **P3（中優先）** - あると良い機能。リリース後の追加も可能
- **P4（低優先）** - 将来的に検討する機能。現時点では優先度が低い

**優先順位付けの方法:**

1. 各機能要件にP1〜P4のラベルを付ける
2. ユーザーに優先順位を確認する
3. 必要に応じて調整する

**対話の例:**

```text
以下の優先順位で進めてよろしいでしょうか？

【P1: 最優先】
- ユーザー登録・ログイン
- 読書記録の作成・編集・削除

【P2: 高優先】
- 本の検索
- 読書メモの作成

【P3: 中優先】
- 読書統計の表示
- 友人との記録共有

調整が必要な項目があれば教えてください。
```

**ユーザーの承認を待つ:** Yesの場合は次のステップへ、調整が必要な場合は優先順位を見直す。

### 6. 要件定義書の作成

収集した情報を要件定義書としてドキュメント化する。
- 実装フェーズで参照できる形で要件を記録する

**ドキュメント構成:**

1. **プロジェクト概要** - プロジェクトの目的とターゲットユーザー
2. **機能一覧表** - 全機能を表形式で一覧表示（機能名、説明、優先順位）
3. **機能要件** - 必要な機能の詳細説明（優先順位付き）
4. **非機能要件** - パフォーマンス、セキュリティ、可用性などの要件
5. **ユーザーストーリー** - ユーザー視点での機能の説明と受け入れ基準
6. **要件の優先順位** - 開発の順序と理由
7. **制約事項** - 技術的・ビジネス的な制約
8. **想定されるリスク** - プロジェクト推進上のリスクと対策

**ドキュメント形式:**

- Markdown形式で作成する
- 保存先はユーザーに確認する

**ドキュメント例については[EXAMPLE.md](EXAMPLE.md)を参照してください。**

**重要な禁止事項:**

- **コードや疑似コードは一切含めない**
  - 要件定義は実装の詳細を含まず、「何を作るか」に集中する
- **技術スタックやアーキテクチャの選定は含めない**
  - 詳細設計フェーズで扱う内容である
- **データベース設計（テーブル定義、ER図など）は含めない**
  - 詳細設計フェーズで扱う内容である

## 出力

実装フェーズで参照できる要件定義書。以下の8項目を含む：

1. プロジェクト概要（目的、ターゲットユーザー、解決する課題）
2. 機能一覧表（全機能を表形式で一覧表示）
3. 機能要件（優先順位付きの詳細説明）
4. 非機能要件（パフォーマンス、セキュリティ、可用性、保守性、互換性）
5. ユーザーストーリー（各機能のユーザー視点での説明と受け入れ基準）
6. 要件の優先順位（開発の順序と理由）
7. 制約事項（ビジネス的・技術的制約、スコープ外の項目）
8. 想定されるリスク（技術的・ビジネス的リスクと対策）

**重要:** 要件定義書には以下を含めないこと：
- コードや疑似コード
- 技術スタックやフレームワークの選定
- データベース設計（テーブル定義、ER図など）
- アーキテクチャ設計（システム構成、デザインパターンなど）
- 具体的な実装方法や処理フロー
